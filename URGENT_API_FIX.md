# 🚨 緊急：API制限エラーの解決方法

## ❌ 現在のエラー

```
❌ APIの利用制限に達しました。しばらく待ってから再度お試しください。
```

---

## 📊 原因

**Google Gemini APIの無料枠が完全に枯渇しました。**

- Google Gemini API無料枠: 1日あたりの制限
- 制限リセット: 24時間後
- 現状: 即時利用不可

---

## ✅ 即時解決策（推奨）

### 方法: OpenAI APIキーを設定

OpenAI APIキーを設定することで、**今すぐアプリが動作**します。

---

## 🔧 設定手順（3ステップ）

### ステップ1: Streamlit Cloudにアクセス

1. https://share.streamlit.io にアクセス
2. ログイン（GitHubアカウントで）
3. デプロイ済みのアプリを選択

### ステップ2: Secretsを開く

1. アプリの右下にある「**⚙️ Settings**」をクリック
2. 左メニューから「**Secrets**」タブを選択

### ステップ3: OPENAI_API_KEYを追加

現在のSecretsに以下を追加：

```toml
OPENAI_API_KEY = "あなたのOpenAI APIキーをここに貼り付け"
```

**実際のAPIキーは `API_KEYS_ACTUAL.md` を参照してください。**

**完全なSecretsの例:**

```toml
GOOGLE_API_KEY = "あなたのGoogle APIキー"
OPENAI_API_KEY = "あなたのOpenAI APIキー"

[auth]
password = "mmi8686"
max_attempts = 5
lockout_duration = 1800
```

4. 「**Save**」ボタンをクリック
5. アプリが自動的に再起動します（約30秒）

---

## 🎯 設定後の動作

### ✅ 期待される動作

1. **LLMが自動切り替え**
   - OpenAI APIキーがある場合: OpenAI GPT-3.5-turbo使用
   - ない場合: Google Gemini使用

2. **エラー解消**
   - API制限エラーが発生しない
   - 質問に正常に回答

3. **パフォーマンス**
   - より高速な応答
   - より安定した動作

---

## ⏳ 代替策（設定しない場合）

### 24時間待つ

- Google Gemini APIの制限は24時間後にリセットされます
- その後、アプリが再び動作します
- **推奨しません**（緊急性が高いため）

---

## 🔍 確認方法

### 設定が成功したか確認

1. Streamlit Cloudでアプリにアクセス
2. ログイン（パスワード: `mmi8686`）
3. 「JINNYについて教えて！」と質問
4. エラーなく回答が表示されれば成功 ✅

---

## 💰 コスト

### OpenAI API使用料金

- **モデル**: GPT-3.5-turbo
- **コスト**: 約$0.002 / 1000トークン
- **1質問あたり**: 約$0.01～0.03（1～3円）
- **月100質問**: 約$1～3（100～300円）

**非常に低コストです！** 💰

---

## 📋 まとめ

| 項目 | 内容 |
|------|------|
| **エラー** | Google Gemini API制限 |
| **解決策** | OpenAI APIキー設定 |
| **設定場所** | Streamlit Cloud Secrets |
| **所要時間** | 2分 |
| **コスト** | 月100～300円 |
| **効果** | 即時利用可能 ✅ |

---

## 🆘 サポート

設定でお困りの場合は、このドキュメントを参照して以下を確認してください：

1. ✅ Streamlit Cloud Secretsを開いた
2. ✅ `OPENAI_API_KEY = "..."`を追加した
3. ✅ 「Save」をクリックした
4. ✅ アプリが再起動した（30秒待つ）

それでも解決しない場合は、管理者にお問い合わせください。

---

**今すぐ設定して、アプリを利用可能にしましょう！** 🚀

