# 🔧 トラブルシューティングガイド

## 🎯 このガイドの使い方

問題が発生した場合、以下の手順で解決してください：

1. **症状を確認**: 下記の目次から該当する問題を探す
2. **解決策を試す**: 手順に従って対処する
3. **それでも解決しない**: サポート窓口に連絡

---

## 📋 目次

1. [アクセス・ログインの問題](#アクセスログインの問題)
2. [検索・質問の問題](#検索質問の問題)
3. [エラーメッセージ](#エラーメッセージ)
4. [パフォーマンスの問題](#パフォーマンスの問題)
5. [ブラウザ・表示の問題](#ブラウザ表示の問題)

---

## アクセス・ログインの問題

### 🚫 問題1: アプリにアクセスできない

#### 症状
- URLを開いても何も表示されない
- 「ページが見つかりません」エラー

#### 原因と解決策

**原因1: URLが間違っている**
```
✅ 解決策:
正しいURL: https://internal-ai-search-app.streamlit.app
（社内で共有されたURLを確認してください）
```

**原因2: ネットワーク接続の問題**
```
✅ 解決策:
1. 他のWebサイト（例: google.com）にアクセスできるか確認
2. Wi-Fiまたはネットワーク接続を確認
3. 社内ネットワークに接続されているか確認（VPN必要な場合）
```

**原因3: メンテナンス中**
```
✅ 解決策:
1. 社内チャット #ai-search-support でメンテナンス情報を確認
2. 30分後に再度アクセス
```

---

### 🔐 問題2: ログインできない

#### 症状
- パスワードを入力しても「パスワードが正しくありません」と表示される

#### 原因と解決策

**原因1: パスワードが間違っている**
```
✅ 解決策:
1. パスワードを再確認（大文字・小文字を区別）
2. コピー＆ペーストで入力
3. 社内チャットで最新のパスワードを確認
```

**原因2: 余分なスペースが含まれている**
```
✅ 解決策:
1. パスワードの前後にスペースが入っていないか確認
2. 手動で入力し直す
```

**原因3: パスワードが変更された**
```
✅ 解決策:
1. 情報システム部に最新のパスワードを確認
2. 社内チャット #ai-search-support で確認
```

---

### 🚪 問題3: ログアウトしてしまった

#### 症状
- 突然ログイン画面に戻された

#### 原因と解決策

**原因: セッションタイムアウト**
```
✅ 解決策:
1. もう一度ログイン
2. 会話履歴は失われるため、必要な情報は事前にコピー推奨
```

---

## 検索・質問の問題

### ❌ 問題4: 「情報が見つかりませんでした」と表示される

#### 症状
- 質問しても「お探しの情報が見つかりませんでした」と返される

#### 原因と解決策

**原因1: キーワードが適切でない**
```
✅ 解決策:
【悪い例】
「休み」→ あいまい

【良い例】
「有給休暇」「特別休暇」→ 具体的

【試してみる】
- 類義語を使う: 「給料」→「給与」
- より一般的な言葉: 「残業代」→「時間外手当」
- 英語・カタカナを変える: 「PC」→「パソコン」
```

**原因2: 情報が社内文書に存在しない**
```
✅ 解決策:
1. モードを変更: 「社内問い合わせ」→「社内文書検索」
2. より広い範囲で質問: 「特定の情報」→「お客様情報」
3. 担当部署に直接問い合わせ
```

**原因3: 質問が曖昧**
```
✅ 解決策:
【悪い例】
「これについて教えて」

【良い例】
「有給休暇の申請方法を教えてください」

【改善ポイント】
- 主語を明確にする
- 何を知りたいか具体的に
- 背景情報を追加
```

---

### 🤔 問題5: 回答が的外れ

#### 症状
- 質問と関係ない回答が返ってくる

#### 原因と解決策

**原因1: 質問が複数の意味に解釈できる**
```
✅ 解決策:
【例】
質問: 「休みについて」
→ 「有給休暇について」なのか「休日について」なのか不明

【改善】
「有給休暇の取得方法について教えてください」
```

**原因2: 会話履歴の影響**
```
✅ 解決策:
1. サイドバーの「🔄 初期化」をクリック
2. 新しい話題で質問し直す
```

**原因3: 情報源が古い/不正確**
```
✅ 解決策:
1. 回答の「情報源」を確認
2. 元のファイルを直接確認
3. 担当部署に最新情報を確認
4. #ai-search-support にフィードバック
```

---

### ⏳ 問題6: 回答が返ってこない

#### 症状
- 質問を送信しても、回答が表示されない
- 「現在、回答を生成中です...」のまま動かない

#### 原因と解決策

**原因1: 処理中（正常）**
```
✅ 解決策:
- 通常30秒〜1分で完了します
- 「現在、回答を生成中です...」が表示されている場合は待つ
```

**原因2: タイムアウト**
```
✅ 解決策:
1. 2分以上待っても変わらない場合はブラウザを更新（F5キー）
2. 再度質問を送信
3. より短い質問に変更
```

**原因3: システムエラー**
```
✅ 解決策:
1. 5分待ってから再アクセス
2. ブラウザのキャッシュをクリア
3. #ai-search-support に報告
```

---

## エラーメッセージ

### ⚠️ エラー1: 「初期化処理に失敗しました」

#### 意味
システムの起動に失敗しました

#### 解決策

```
【ステップ1】ブラウザを更新
F5キーを押すか、ブラウザの更新ボタンをクリック

【ステップ2】5分待つ
一時的なエラーの可能性があります

【ステップ3】ブラウザのキャッシュをクリア
1. Chrome: Ctrl+Shift+Delete
2. 「キャッシュされた画像とファイル」を選択
3. 「データを削除」

【ステップ4】サポートに連絡
それでも解決しない場合は #ai-search-support に報告
```

---

### ⚠️ エラー2: 「制限に達しました」

#### 意味
1日の質問回数制限に達しました

#### 解決策

```
【制限の詳細】
- 1日約750回の質問が可能
- 全社員で共有
- 毎朝9時にリセット

【対応方法】
1. 翌朝9時まで待つ
2. 急ぎの場合は担当部署に直接問い合わせ
3. #ai-search-support に相談
```

---

### ⚠️ エラー3: 「レート制限に達しました」

#### 意味
短時間に質問しすぎました

#### 解決策

```
【制限の詳細】
- 1分間に約7〜8回まで
- 連続質問を防ぐための制限

【対応方法】
1. 1分ほど待つ
2. 質問を続ける
```

---

### ⚠️ エラー4: 「APIキーが見つかりません」

#### 意味
システム設定エラー（ユーザー側で解決できません）

#### 解決策

```
【即座に報告】
1. スクリーンショットを撮る
2. #ai-search-support に報告
3. 情報システム部に連絡

【管理者向け】
Streamlit CloudのSecretsでGOOGLE_API_KEYを確認
```

---

## パフォーマンスの問題

### 🐌 問題7: 動作が遅い

#### 症状
- 質問の送信に時間がかかる
- 画面の切り替えが遅い

#### 原因と解決策

**原因1: ネットワークが遅い**
```
✅ 解決策:
1. 他のWebサイトの速度を確認
2. Wi-Fiの電波強度を確認
3. 可能であれば有線LANに切り替え
```

**原因2: ブラウザのメモリ不足**
```
✅ 解決策:
1. 不要なタブを閉じる
2. ブラウザを再起動
3. PCを再起動
```

**原因3: システムの高負荷**
```
✅ 解決策:
1. 時間をずらして利用（昼休みや定時直後は混雑）
2. 数分待ってから再試行
```

---

### ⏰ 問題8: 初回起動が遅い

#### 症状
- アプリを開くと、最初だけ1分以上かかる

#### 原因と解決策

**これは正常です**
```
【説明】
初回起動時は以下の処理を行います：
- データベースの読み込み
- AIモデルの準備
- ベクトル検索の初期化

【所要時間】
- 初回: 30秒〜1分
- 2回目以降: 3〜10秒

【対応】
- 待つだけでOK
- 2回目以降は高速化されます
```

---

## ブラウザ・表示の問題

### 🖥️ 問題9: 画面のレイアウトが崩れる

#### 症状
- ボタンが表示されない
- サイドバーが見えない
- テキストが重なっている

#### 原因と解決策

**原因1: ブラウザのズームレベル**
```
✅ 解決策:
1. Ctrl+0 (ゼロ) でズームをリセット
2. ズームレベルを100%に設定
```

**原因2: ブラウザが古い**
```
✅ 解決策:
1. ブラウザを最新版にアップデート
2. 推奨ブラウザ:
   - Google Chrome（最新版）
   - Microsoft Edge（最新版）
   - Firefox（最新版）
```

**原因3: CSSの読み込みエラー**
```
✅ 解決策:
1. ブラウザのキャッシュをクリア
2. Ctrl+F5 でスーパーリロード
3. 別のブラウザで試す
```

---

### 📱 問題10: スマホで使いにくい

#### 症状
- ボタンが小さくて押しにくい
- 文字が読みにくい

#### 原因と解決策

**これは仕様です**
```
【説明】
このアプリはPC向けに最適化されています

【推奨】
- PCまたはタブレットでの利用を推奨
- 緊急時のみスマホで利用

【スマホで使う場合のコツ】
1. 横向きで使用
2. ブラウザをフルスクリーンモード
3. ピンチアウトでズーム
```

---

### 🔤 問題11: 文字化けする

#### 症状
- 日本語が正しく表示されない
- 「&#12354;」のような文字が表示される

#### 原因と解決策

**原因: 文字コードの問題**
```
✅ 解決策:
1. ブラウザの文字エンコーディングを確認
   Chrome: 設定 → 詳細設定 → 言語
   文字エンコーディング: UTF-8

2. ブラウザのキャッシュをクリア

3. それでも解決しない場合は #ai-search-support に報告
```

---

## 🔍 問題が解決しない場合

### ステップ1: 基本的な対処

```
1. ブラウザを更新（F5キー）
2. ブラウザを再起動
3. PCを再起動
4. 別のブラウザで試す
5. 別のPCで試す
```

### ステップ2: 情報を収集

以下の情報を用意してください：

```
✅ 発生日時
✅ 使用しているブラウザとバージョン
✅ 具体的な操作手順
✅ エラーメッセージ（スクリーンショット）
✅ 何を試したか
```

### ステップ3: サポートに連絡

```
【連絡先】
- 社内チャット: #ai-search-support
- メール: ai-support@mm-international.co.jp
- 内線: 1234（情報システム部）

【営業時間】
平日 9:00〜18:00
```

---

## 📊 エラーコード一覧

| コード | 意味 | 対応 |
|--------|------|------|
| ERR-001 | 初期化エラー | ブラウザ更新 |
| ERR-002 | APIキーエラー | 管理者に連絡 |
| ERR-429 | レート制限 | 1分待つ |
| ERR-500 | サーバーエラー | 5分待つ |
| ERR-AUTH | 認証エラー | 再ログイン |

---

## 🎯 よくある誤操作

### 誤操作1: 履歴を消してしまった

```
【対応】
- 復元はできません
- 次回から注意: 「🔄 初期化」ボタンは慎重に
```

### 誤操作2: 意図せずログアウト

```
【対応】
- もう一度ログイン
- 会話履歴は失われます
```

### 誤操作3: 送信せずに文章が消えた

```
【対応】
- 長文を入力する場合は、メモ帳で下書き推奨
- コピー＆ペーストで入力
```

---

## 🔐 セキュリティ関連のトラブル

### 問題12: パスワードが変わった？

```
【確認方法】
1. 社内チャット #ai-search-support で確認
2. 最新のお知らせを確認
3. 情報システム部に問い合わせ

【定期変更】
セキュリティのため、パスワードは月1回変更されます
```

### 問題13: 他の人が自分のアカウントで...

```
【説明】
このアプリには個人アカウントはありません
全社員が同じパスワードで共有しています

【プライバシー】
会話履歴はあなたのブラウザにのみ保存されます
```

---

## 🛠️ 管理者向け: 緊急対応

### システムダウン時

```
1. Streamlit Cloud のステータス確認
2. ログを確認
3. アプリを再起動
4. 必要に応じてロールバック
```

### APIキー漏洩時

```
1. 即座にAPIキーを無効化
2. 新しいAPIキーを生成
3. Secrets を更新
4. 全社員に通知
```

---

## 📞 サポート情報

### 即座に連絡が必要なケース

- ❗ セキュリティ関連の問題
- ❗ 全社員が使えない状態
- ❗ 個人情報が表示された
- ❗ エラーが繰り返し発生

### 通常対応でOKなケース

- 💬 使い方の質問
- 💬 機能改善の提案
- 💬 1回だけのエラー

---

## ✅ チェックリスト

問題を報告する前に、以下を確認してください：

- [ ] ブラウザを更新した
- [ ] ログアウト/ログインを試した
- [ ] 別のブラウザで試した
- [ ] ネットワーク接続を確認した
- [ ] FAQを確認した
- [ ] スクリーンショットを撮った
- [ ] 発生日時をメモした

---

**それでも解決しない場合は、遠慮なくサポートにご連絡ください！**

**#ai-search-support でお待ちしています** 😊

